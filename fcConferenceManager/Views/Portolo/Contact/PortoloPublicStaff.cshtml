@using fcConferenceManager.Models;
@model fcConferenceManager.Models.Portolo.PortoloContactUs
@{
    Layout = "~/Views/Portolo/Shared/_Layout.cshtml";
    ViewBag.Title = "PortoloPublicStaff";
}
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="wXWPE7+C5Hf7XhIYRLVnYzwDuNv9+IDtq275TZhyGBmZsCHkp/b27NRuUQ50t0uqvZFUJzzYlOy+E5YV0XISSgTN+UECYByz6yzX5h1rCZm3HzYX8BRtyKWPY7U//IUu" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script>
        function GetDetails(id) {
            $.ajax({
                url: "/Contact/EditContacts/" + id,
                type: "GET",
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (response) {
                    $('#hfId').val(response.Id);
                    $('#txtUpdateRole').val(response.Role);
                    $('#txtUpdateName').val(response.Name);
                    $('#txtUpdatePhone').val(response.Phone);
                    $('#txtUpdateEmail').val(response.Email);
                    $('#txtUpdateTitle').val(response.Title);
                    $('#ImageSrc').val(response.ImageSrc);
                    $('#modal-Update').modal('show');
                },
                error: function (response) {
                    alert(response.responseText);
                }
            });
            return false;
        }
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            var phoneexp = /^[\+]?[\(]?([0-9]{0,3})[\)]?[-. ]?([0-9]{0,9})[-. ]?([0-9]{0,4})[-. ]?([0-9]{0,4})$/;
            /*var phoneexp = /^[\+]?[(]?[0-9]{0,3}[)]?[-.]?[0-9]{0,3}[-.]?[0-9]{4,6}$/;*/
            $("#txtUpdatePhone").attr('maxlength', '16');
            $( '#SubmitButton').click(function () {
                if ($('#txtUpdateRole').val().trim() === "") {
                    alert("Please Enter Role!");
                    return false;
                }
                else if ($('#txtUpdateName').val().trim() === "") {
                    alert("Please Enter Name!");
                    return false;
                }
                else if ($('#txtUpdateTitle').val().trim() === "") {
                    alert("Please Enter Title!");
                    return false;
                }
                else if ($('#txtUpdatePhone').val().trim() === "") {
                    alert("Please Enter Phone No!");
                    return false;
                }
                else if ($('#txtUpdateEmail').val().trim() === "") {
                    alert("Please Enter Email Id!");
                    return false;
                }

                else if (!$('#txtUpdatePhone').val().match(phoneexp)) {
                    alert("Invalid Phone No.!");
                    return false;
                }
                return true;
            });
            $('#UploadImage').change(function () {
                var extension = $(this).val().split('.').pop().toLowerCase();
                var validFileExtensions = ['jpg', 'png', 'jpeg'];
                if ($.inArray(extension, validFileExtensions) == -1) {
                    alert("Sorry!! Upload only 'jpg', 'png', 'jpeg' Images")
                    $(this).replaceWith($(this).val('').clone(true));
                    //Disable Submit Button
                    return false;
                } else {
                    //Enable Submit Button
                    return true;
                }
            });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            var phoneexp = /^[\+]?[\(]?([0-9]{0,3})[\)]?[-. ]?([0-9]{0,9})[-. ]?([0-9]{0,4})[-. ]?([0-9]{0,4})$/;
            $('#addPhone').attr('maxlength', '16');
            $('#addButton').click(function () {
                if ($('#addRole').val().trim() === "") {
                    alert("Please Enter Role!");
                    return false;
                }
                else if ($('#addName').val().trim() === "") {
                    alert("Please Enter Name!");
                    return false;
                }
                else if ($('#addTitle').val().trim() === "") {
                    alert("Please Enter Title!");
                    return false;
                }
                else if ($('#addPhone').val().trim() === "") {
                    alert("Please Enter Phone No!");
                    return false;
                }
                else if ($('#addEmail').val().trim() === "") {
                    alert("Please Enter EmailId!");
                    return false;
                }
               
                else if (!$('#addPhone').val().match(phoneexp)) {
                    alert("Invalid Phone No.!");
                    return false;
                }
                return true;
            });
            $('#addImage').change(function () {
                var extension = $(this).val().split('.').pop().toLowerCase();
                var validFileExtensions = ['jpg', 'png', 'jpeg'];
                if ($.inArray(extension, validFileExtensions) == -1) {
                    alert("Sorry!! Upload only 'jpg', 'png', 'jpeg' Images")
                    $(this).replaceWith($(this).val('').clone(true));
                    //Disable Submit Button
                    return false;
                } else {
                    //Enable Submit Button
                    return true;
                }
            });
        });
        function Openform() {
            $('#modal-mrole').modal('show');
        }
        
    </script>
    <style>
        div .modal-dialog-centered {
            max-width: 80%;
        }

        .pdl-1 {
            padding-left: 15px;
        }

        thead {
            background-color: #6e6c6c;
        }

        th a {
            color: lightyellow;
        }

        th {
            color: lightyellow;
        }

        i {
            background: orange;
            padding: 5px;
            color: #fff;
            border-radius: 50px;
            margin-left: 5px;
        }

        #anchor {
            background: orange;
            padding: 5px;
            color: #fff;
            border-radius: 50px;
            margin-left: 5px;
        }

        a:hover {
            color: darkorange;
        }
    </style>
</head>
<body>
    @if (ViewBag.Message != null)
    {
        <script type="text/javascript">

            window.onload = function () {
                alert("@ViewBag.Message");
            };
        </script>

    }
    <section class="task-list-form center">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="box box-primary">

                        <br />
                        <div class="card-header">
                            <div class="control-icons">
                                <label class="dt-head-left" style="font-size:large;"><b>Public Staff List</b></label> &nbsp;
                                <button type="button" class="brdr-1 btn-sm pull-right" data-toggle="modal" data-target="#model-mrole" onclick="Openform()" style="margin-right:20px; ">
                                    Add New Contact
                                </button>
                            </div>
                        </div>


                        <br />

                        <div class="box-body">
                            <div class="emp-db mt-4">
                                <div class="card emp-data">
                                    <div class="emp-data">

                                        @if (Model.ContactList.Count > 0)
                                        {
                                            var grid = new WebGrid(source: Model.ContactList, canPage: true, rowsPerPage: 50);
                                            @grid.GetHtml(tableStyle: "table table-striped table-bordered table-hover", headerStyle: "webgrid-header",
                                            alternatingRowStyle: "webgrid-alternating-row", selectedRowStyle: "webgrid-selected-row",
                                            footerStyle: "webgrid-footer", rowStyle: "webgrid-row-style", mode: WebGridPagerModes.All,
                                            firstText: "<< First", previousText: "< Prev", nextText: "Next >", lastText: "Last >>",
                                            htmlAttributes: new { id = "DataTable" },
                                            columns: grid.Columns(
                                             grid.Column(header: "", format:
                                                                @<text>
                                                                    @if (item.ImageSrc != null && item.ImageSrc != "")
                                                                    {
                                                                        <img src="@item.ImageSrc" width="50" height="50" style="border-radius:5px; border: gray thin solid; " />
                                                                    }
                                                                    else
                                                                    {
                                                                        <img src="@ViewBag.ContactImage" width="50" height="50" style="border-radius: 5px; border: gray thin solid; " />
                                                                    }

                                                                </text>),
                             grid.Column("Role", header: "Role", canSort: true),
                             grid.Column("Name", header: "Name", canSort: true),
                             grid.Column("Title", header: "Title", canSort: true),
                             grid.Column("Phone", header: "Contact Number", canSort: true),
                             grid.Column("Email", header: "Email", canSort: true),

                             grid.Column(header: "Actions", format:
                                                                                @<text>
                                                                                    <a onclick="GetDetails(@item.Id)">
                                                                                        <i class="fa fa-edit"></i>
                                                                                    </a>
                                                                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                                    <a>
                                                                                        @Html.ActionLink(" ", "DeleteContact", "Contact", new { Id = item.Id }, new { onclick = "return confirm('Are you sure wants to delete?');", @class = "fa fa-trash-o ", @id = "anchor" })
                                                                                    </a>
                                                                                </text>)));
                                            @Html.Hidden("dir", grid.SortDirection)
                                            @Html.Hidden("col", grid.SortColumn)

                                        }
                                        else
                                        {
                                            <b>No Details Found.</b>
                                        }

                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="modal fade" id="modal-mrole" tabindex="-1" aria-labelledby="modalOne" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-xl form-popup">
                                <div class="modal-content">
                                    <div class="modal-header with-border">
                                        <h3 class="box-title k-dialog-centered"> New Contact</h3>
                                    </div>
                                    <div class="modal-body">
                                        <div class="box box-primary">
                                            @using (Html.BeginForm("NewContacts", "Contact", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                            {
                                                <form id="myForm">


                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="Role" style="text-size-adjust:auto; font-size:larger"><b>Role:</b></label>
                                                                <input type="text" class="form-control" id="addRole" name="Role" placeholder="Enter Role" required>
                                                               <span class="error"></span>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="Name" style="text-size-adjust:auto; font-size:larger"><b>Name:</b></label>
                                                                <input type="text" class="form-control" id="addName" name="Name" placeholder="Enter Name" required>
                                                                <span class="error"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="Title" style="text-size-adjust:auto; font-size:larger"><b>Title:</b></label>
                                                                <input type="text" class="form-control" id="addTitle" name="Title" placeholder="Enter Title" required>
                                                                <span class="error"></span>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="Phone" style="text-size-adjust:auto; font-size:larger"><b>Phone:</b></label>
                                                                <input type="text" class="form-control" id="addPhone" name="Phone" placeholder="Enter Phone" required>
                                                                <span class="error"></span>

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">

                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="ProfileImage" style="text-size-adjust:auto; font-size:larger"><b>Profile Image:</b></label>
                                                                <input type="file" class="form-control" id="addImage" name="ProfileImage" accept=".png,.jpg,.jpeg,.gif,.tif">
                                                                <span class="error"></span>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label for="Email" style="text-size-adjust:auto; font-size:larger"><b>Email:</b></label>
                                                                <input type="email" class="form-control" id="addEmail" name="Email" placeholder="Enter Email" required>
                                                                <span class="error"></span>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="modal-footer">
                                                        <button type="submit" class="brdr-1 btn-sm btn-outline-primary " id="addButton">Submit</button>
                                                        <button id="closeModal" type="button" class="brdr-1 btn-sm" data-bs-dismiss="modal" aria-label="Close">Close</button>
                                                    </div>
                                                </form>
                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="modal-Update" tabindex="-1" aria-labelledby="modalOne" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered modal-xl form-popup">
                                <div class="modal-content">
                                    <div class="modal-header with-border">
                                        <h3 class="box-title k-dialog-centered"> Update Contact</h3>
                                    </div>
                                    <div class="modal-body">
                                        <div class="box box-primary">
                                            @using (Html.BeginForm("UpdateContacts", "Contact", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                            {



                                                <div class="row">
                                                    <input type="hidden" id="hfId" name="Id">
                                                    <div class="col-md-6">
                                                        <div class="form-group">

                                                            <label for="Role" style="text-size-adjust:auto; font-size:larger"><b>Role:</b></label>
                                                            <input type="text" class="form-control" id="txtUpdateRole" name="Role" placeholder="Enter Role" required>
                                                            <span class="error"></span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Name" style="text-size-adjust:auto; font-size:larger"><b>Name:</b></label>
                                                            <input type="text" class="form-control" id="txtUpdateName" name="Name" placeholder="Enter Name" required>
                                                            <span class="error"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Title" style="text-size-adjust:auto; font-size:larger"><b>Title:</b></label>
                                                            <input type="text" class="form-control" id="txtUpdateTitle" name="Title" placeholder="Enter Title" required>
                                                            <span class="error"></span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Phone" style="text-size-adjust:auto; font-size:larger"><b>Phone:</b></label>
                                                            <input type="text" class="form-control" id="txtUpdatePhone" name="Phone" placeholder="Enter Phone" size="50" required>
                                                            <span class="error"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <input type="hidden" id="ImageSrc" name="ImageSrc" />
                                                            <label for="ProfileImage" style="text-size-adjust:auto; font-size:larger"><b>Profile Image:</b></label>
                                                            <input type="file" class="form-control" name="ProfileImage" id="UploadImage" accept=".png,.jpg,.jpeg,.gif,.tif">
                                                            <span class="error"></span>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label for="Email" style="text-size-adjust:auto; font-size:larger"><b>Email:</b></label>
                                                            <input type="email" class="form-control" id="txtUpdateEmail" name="Email" placeholder="Enter Email" required>
                                                            <span class="error"></span>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="modal-footer">
                                                    <button type="submit" class="brdr-1 btn-sm btn-outline-primary " id="SubmitButton">Update</button>
                                                    <button id="closeModal" type="button" class="brdr-1 btn-sm" data-bs-dismiss="modal" aria-label="Close">Close</button>
                                                </div>

                                            }
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br />
    </section>
</body>
</html>
